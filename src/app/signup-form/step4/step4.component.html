<app-signup-header></app-signup-header>
<!-- step-1-start-here -->
<section class="step-4-wrap common-step-wrapper">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-6">
        <div
          class="common-step-content-wrapper d-flex justify-content-sm-between flex-column flex-sm-row"
        >
          <div class="step-listing">
            <span class="active-filled"></span>
            <span class="active-filled"></span>
            <span class="active-filled"></span>
            <span class="active"></span>
          </div>
          <div class="form-content-wrapper w-100">
            <h1 class="main-heading">Add the Finishing touches</h1>
            <div class="form-wrapper example-containe">
              <form
                #ngoStepFour="ngForm"
                (submit)="submitStepFour(ngoStepFour)"
              >
                <div class="form-container">
                  <div class="form-group mt-md-4">
                    <label class="common-label"
                      >Your NGO Story<sup>*</sup></label
                    >
                    <p-editor
                      name="story"
                      [(ngModel)]="model.story"
                      (onTextChange)="countWords($event)"
                      #story="ngModel"
                      [style]="{ height: '200px' }"
                      required="true"
                      spellcheck="false"
                    >
                      <p-header>
                        <span class="ql-formats">
                            <button class="ql-bold" aria-label="Bold"></button>
                            <button class="ql-italic" aria-label="Italic"></button>
                            <button class="ql-underline" aria-label="Underline"></button>
                        </span>
                        <span class="ql-formats">
                          <select title="Text Color" class="ql-color">
                              <option value="rgb(0, 0, 0)" label="rgb(0, 0, 0)" selected=""></option>
                              <option value="rgb(230, 0, 0)" label="rgb(230, 0, 0)"></option>
                              <option value="rgb(255, 153, 0)" label="rgb(255, 153, 0)"></option>
                              <option value="rgb(255, 255, 0)" label="rgb(255, 255, 0)"></option>
                              <option value="rgb(0, 138, 0)" label="rgb(0, 138, 0)"></option>
                              <option value="rgb(0, 102, 204)" label="rgb(0, 102, 204)"></option>
                              <option value="rgb(153, 51, 255)" label="rgb(153, 51, 255)"></option>
                              <option value="rgb(255, 255, 255)" label="rgb(255, 255, 255)"></option>
                              <option value="rgb(250, 204, 204)" label="rgb(250, 204, 204)"></option>
                              <option value="rgb(255, 235, 204)" label="rgb(255, 235, 204)"></option>
                              <option value="rgb(255, 255, 204)" label="rgb(255, 255, 204)"></option>
                              <option value="rgb(204, 232, 204)" label="rgb(204, 232, 204)"></option>
                              <option value="rgb(204, 224, 245)" label="rgb(204, 224, 245)"></option>
                              <option value="rgb(235, 214, 255)" label="rgb(235, 214, 255)"></option>
                              <option value="rgb(187, 187, 187)" label="rgb(187, 187, 187)"></option>
                              <option value="rgb(240, 102, 102)" label="rgb(240, 102, 102)"></option>
                              <option value="rgb(255, 194, 102)" label="rgb(255, 194, 102)"></option>
                              <option value="rgb(255, 255, 102)" label="rgb(255, 255, 102)"></option>
                              <option value="rgb(102, 185, 102)" label="rgb(102, 185, 102)"></option>
                              <option value="rgb(102, 163, 224)" label="rgb(102, 163, 224)"></option>
                              <option value="rgb(194, 133, 255)" label="rgb(194, 133, 255)"></option>
                              <option value="rgb(136, 136, 136)" label="rgb(136, 136, 136)"></option>
                              <option value="rgb(161, 0, 0)" label="rgb(161, 0, 0)"></option>
                              <option value="rgb(178, 107, 0)" label="rgb(178, 107, 0)"></option>
                              <option value="rgb(178, 178, 0)" label="rgb(178, 178, 0)"></option>
                              <option value="rgb(0, 97, 0)" label="rgb(0, 97, 0)"></option>
                              <option value="rgb(0, 71, 178)" label="rgb(0, 71, 178)"></option>
                              <option value="rgb(107, 36, 178)" label="rgb(107, 36, 178)"></option>
                              <option value="rgb(68, 68, 68)" label="rgb(68, 68, 68)"></option>
                              <option value="rgb(92, 0, 0)" label="rgb(92, 0, 0)"></option>
                              <option value="rgb(102, 61, 0)" label="rgb(102, 61, 0)"></option>
                              <option value="rgb(102, 102, 0)" label="rgb(102, 102, 0)"></option>
                              <option value="rgb(0, 55, 0)" label="rgb(0, 55, 0)"></option>
                              <option value="rgb(0, 41, 102)" label="rgb(0, 41, 102)"></option>
                              <option value="rgb(61, 20, 102)" label="rgb(61, 20, 102)"></option>
                          </select>
                          <select title="Background Color" class="ql-background">
                            <option value="rgb(0, 0, 0)" label="rgb(0, 0, 0)" selected=""></option>
                            <option value="rgb(230, 0, 0)" label="rgb(230, 0, 0)"></option>
                            <option value="rgb(255, 153, 0)" label="rgb(255, 153, 0)"></option>
                            <option value="rgb(255, 255, 0)" label="rgb(255, 255, 0)"></option>
                            <option value="rgb(0, 138, 0)" label="rgb(0, 138, 0)"></option>
                            <option value="rgb(0, 102, 204)" label="rgb(0, 102, 204)"></option>
                            <option value="rgb(153, 51, 255)" label="rgb(153, 51, 255)"></option>
                            <option value="rgb(255, 255, 255)" label="rgb(255, 255, 255)"></option>
                            <option value="rgb(250, 204, 204)" label="rgb(250, 204, 204)"></option>
                            <option value="rgb(255, 235, 204)" label="rgb(255, 235, 204)"></option>
                            <option value="rgb(255, 255, 204)" label="rgb(255, 255, 204)"></option>
                            <option value="rgb(204, 232, 204)" label="rgb(204, 232, 204)"></option>
                            <option value="rgb(204, 224, 245)" label="rgb(204, 224, 245)"></option>
                            <option value="rgb(235, 214, 255)" label="rgb(235, 214, 255)"></option>
                            <option value="rgb(187, 187, 187)" label="rgb(187, 187, 187)"></option>
                            <option value="rgb(240, 102, 102)" label="rgb(240, 102, 102)"></option>
                            <option value="rgb(255, 194, 102)" label="rgb(255, 194, 102)"></option>
                            <option value="rgb(255, 255, 102)" label="rgb(255, 255, 102)"></option>
                            <option value="rgb(102, 185, 102)" label="rgb(102, 185, 102)"></option>
                            <option value="rgb(102, 163, 224)" label="rgb(102, 163, 224)"></option>
                            <option value="rgb(194, 133, 255)" label="rgb(194, 133, 255)"></option>
                            <option value="rgb(136, 136, 136)" label="rgb(136, 136, 136)"></option>
                            <option value="rgb(161, 0, 0)" label="rgb(161, 0, 0)"></option>
                            <option value="rgb(178, 107, 0)" label="rgb(178, 107, 0)"></option>
                            <option value="rgb(178, 178, 0)" label="rgb(178, 178, 0)"></option>
                            <option value="rgb(0, 97, 0)" label="rgb(0, 97, 0)"></option>
                            <option value="rgb(0, 71, 178)" label="rgb(0, 71, 178)"></option>
                            <option value="rgb(107, 36, 178)" label="rgb(107, 36, 178)"></option>
                            <option value="rgb(68, 68, 68)" label="rgb(68, 68, 68)"></option>
                            <option value="rgb(92, 0, 0)" label="rgb(92, 0, 0)"></option>
                            <option value="rgb(102, 61, 0)" label="rgb(102, 61, 0)"></option>
                            <option value="rgb(102, 102, 0)" label="rgb(102, 102, 0)"></option>
                            <option value="rgb(0, 55, 0)" label="rgb(0, 55, 0)"></option>
                            <option value="rgb(0, 41, 102)" label="rgb(0, 41, 102)"></option>
                            <option value="rgb(61, 20, 102)" label="rgb(61, 20, 102)"></option>
                        </select>
                        </span>
                      </p-header>
                    </p-editor>
                    <p class="max-length mt-3" *ngIf="maxWords">
                      Description must be between 10 to 500 Words
                    </p>
                    <div
                      *ngIf="story.invalid && (story.dirty || story.touched)"
                    >
                      <div *ngIf="story.errors.required" class="error-msg">
                        Story is required.
                      </div>
                    </div>
                  </div>
                  <div class="form-group mt-md-4">
                    <label class="common-label"
                      >Select a Cover Photo<sup>*</sup></label
                    >
                    <!--1 Display. if image is uploaded -->
                    <div
                      *ngIf="ulpoadedFiles?.length > 0"
                      class="image-uploaded position-relative"
                    >
                      <div style="margin:5px" class="upload-image-img">
                        <span (click)="cropImage(ulpoadedFiles[0]?.imgId)">
                          <img [src]="croppedImage" />
                        </span>
                      </div>
                      <div class="upload-image-edit-img">
                        <p-fileUpload
                          name="images"
                          customUpload="true"
                          [auto]="true"
                          [showUploadButton]="false"
                          (uploadHandler)="onCoverImgUpload($event)"
                          chooseLabel="Edit Image"
                          accept=".jpeg, .jpg, .png, .gif"
                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                          maxFileSize="2000000"
                          required
                          class="upload-photo"
                        >
                        </p-fileUpload>
                      </div>
                    </div>
                    <!--1 Default Display.-->
                    <p-fileUpload
                      *ngIf="ulpoadedFiles?.length == 0"
                      name="images"
                      customUpload="true"
                      [auto]="true"
                      [showUploadButton]="false"
                      (uploadHandler)="onCoverImgUpload($event)"
                      chooseLabel="Drag a File here or browse for a file to upload"
                      accept=".jpeg, .jpg, .png, .gif"
                      allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                      maxFileSize="2000000"
                      required
                    >
                    </p-fileUpload>
                  </div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="arrow-left">
                    <button
                    routerLink="/signupform/step3"
                      class="arrow-submit"
                      (click)="goBack()"
                    ></button>
                  </div>
                  <div class="arrow-right">
                    <button
                    class="submit-approval"
                    type="submit"
                    [disabled]="
                      ngoStepFour.invalid || coverImageName == null || maxWords
                    "
                  >
                    Submit for Approval
                  </button>
                  </div>
                </div>
              </form>
            </div>
            <span class="requiredFeilds">
              <sup>*</sup> Indicated required fields
            </span>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <img src="/assets/images/ngo/r4.png" alt="" class="img-fluid" />
      </div>
    </div>
  </div>
  <!-- Loader -->
  <app-signup-loader [isLoaded]="isLoading"></app-signup-loader>
</section>
<!-- Submit dialogue box -->
<p-dialog
  [(visible)]="displayBasic"
  [style]="{ width: '100%', 'max-width': '630px', background: '#fafbfd' }"
  [baseZIndex]="10000"
  closeIcon="false"
>
  <a href="" class="submit-tick"></a>
  <div class="submit-popup-inner">
    <h3>Thank you!</h3>
    <div class="message-img">
      <img src="/assets/images/ngo/sentEnv.png" alt="" class="img-fluid" />
    </div>
    <p class="fz20 fw500 mb-5">
      Your profile has been sent to the <br />
      Qause Team for review.
    </p>
    <p class="fz18 fw500">
      While you're waiting for the approval, <br />
      let's work on making your profile <br />
      to create a better impact.
    </p>
    <button class="popup-btn submit-approval" (click)="storyPage()">
      Enhance your Profile
    </button>
    <span class="adding-stories fz18 blue-color d-block font-italic"
      >By adding stories, events, and some pictures!
    </span>
    <button
      routerLink="/"
      class="bg-transparent border-0 fw500 mt-5 mb-4 fz18 blue-color-hover"
    >
      <i class="fa fa-angle-left fz20" aria-hidden="true"></i> Back to Home
    </button>
  </div>
  <div
    class="submit-popup-footer bg-grey d-flex justify-content-around pt-3 pb-3"
  >
    <a href="tel: +91 9119333999" class="blue-color fz22"
      ><i class="fa fa-phone" aria-hidden="true"></i> +91 9119333999</a
    >
    <a href="mailto:support@qause.com" class="blue-color fz22"
      ><i class="fa fa-envelope" aria-hidden="true"></i> support@qause.com</a
    >
  </div>
</p-dialog>

<!-- cover image Crop Dialogue Box -->
<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{ display: display }">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{ coverImageName }}</h4>
      </div>
      <div class="modal-body">
        <image-cropper
          [imageChangedEvent]="imageChangedEvent"
          [maintainAspectRatio]="true"
          [aspectRatio]="5 / 3"
          [resizeToWidth]="800"
          format="png"
          (imageCropped)="imageCropped($event)"
          (imageLoaded)="imageLoaded()"
          (cropperReady)="cropperReady()"
          (loadImageFailed)="loadImageFailed()"
          style="max-height: 500px"
        >
        </image-cropper>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-default btn-box-shadow"
          (click)="SaveCropedImage()"
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>
