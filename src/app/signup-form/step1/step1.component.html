<app-signup-header></app-signup-header>
<!-- step-1-start-here -->
<section class="step-1-wrap common-step-wrapper">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-6">
        <div
          class="common-step-content-wrapper d-flex justify-content-sm-between flex-column flex-sm-row"
        >
          <div class="step-listing">
            <span class="active"></span>
            <span></span>
            <span></span>
            <span></span>
          </div>
          <div class="form-content-wrapper w-100">
            <h1 class="main-heading">
              Welcome, <span> {{ ngoData.name }}</span>
            </h1>
            <div class="form-wrapper example-containe">
              <form #steponeForm="ngForm" (submit)="submitStepOne(steponeForm)">
                <div class="form-container">
                  <div class="form-group">
                    <label for="ngo-category" class="common-label"
                      >What Category does your NGO belong to?<sup>*</sup></label
                    >
                    <div class="custom-select-step position-relative">
                      <p-dropdown
                        styleClass="common-input"
                        [options]="ngoCategory"
                        name="category"
                        [(ngModel)]="selectItemList"
                        #category="ngModel"
                        required="true"
                        (onChange)="changeCategory($event)"
                      >
                      </p-dropdown>
                      <div
                        *ngIf="
                          category.invalid &&
                          (category.dirty || category.touched)
                        "
                      >
                        <div *ngIf="category.errors.required" class="error-msg">
                          Category is required.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mt-md-5">
                    <label class="common-label">Sub Category<sup>*</sup></label>
                    <span class="ui-fluid">
                      <p-autoComplete
                        name="subCategories"
                        [(ngModel)]="model.subCategories"
                        [suggestions]="filteredSubcategoriesMultiple"
                        (completeMethod)="filterSubcategoryMultiple($event)"
                        styleClass="wid100 "
                        [minLength]="1"
                        #subCategory="ngModel"
                        placeholder="Hint: type 'v' or 'f'"
                        [multiple]="true"
                        [dropdown]="true"
                        required="true"
                        [disabled]="!subCategoryVal"
                      >
                      </p-autoComplete>
                      <div
                        *ngIf="
                          subCategory.invalid &&
                          (subCategory.dirty || subCategory.touched)
                        "
                      >
                        <div
                          *ngIf="subCategory.errors.required"
                          class="error-msg"
                        >
                          NGO Sub Category is required.
                        </div>
                      </div>
                    </span>
                  </div>
                  <div class="form-group mt-md-5">
                    <label class="common-label">Facilities<sup>*</sup></label>
                    <span class="ui-fluid">
                      <p-autoComplete
                        name="facilities"
                        [(ngModel)]="model.facilities"
                        [suggestions]="filteredFacilitiesMultiple"
                        (completeMethod)="filterFacilitiesMultiple($event)"
                        styleClass="wid100"
                        [minLength]="1"
                        #facilities="ngModel"
                        placeholder="Hint: type 'v' or 'f'"
                        [multiple]="true"
                        [dropdown]="true"
                        [disabled]="!subCategoryVal"
                        required="true"
                      >
                      </p-autoComplete>
                      <div
                        *ngIf="
                          facilities.invalid &&
                          (facilities.dirty || facilities.touched)
                        "
                      >
                        <div
                          *ngIf="facilities.errors.required"
                          class="error-msg"
                        >
                          NGO facilitie is required.
                        </div>
                      </div>
                    </span>
                  </div>
                  <div class="form-group mt-md-5">
                    <label class="common-label">NGO Logo<sup>*</sup></label>
                    <!--Display. if image is uploaded -->
                    <div
                      *ngIf="ulpoadedFiles?.length > 0"
                      class="image-uploaded position-relative"
                    >
                      <div style="margin: 5px" class="upload-image-img" (click)="cropImage(ulpoadedFiles[0]?.imgId)">
                        <span>
                          <img [src]="croppedImage" />
                        </span>
                      </div>
                      <div class="upload-image-edit-img">
                        <p-fileUpload
                          name="images"
                          customUpload="true"
                          [auto]="true"
                          [showUploadButton]="false"
                          (uploadHandler)="onNgoLogoUpload($event)"
                          chooseLabel=""
                          accept=".jpeg, .jpg, .png, .gif"
                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                          maxFileSize="2000000"
                          required
                          class="upload-photo"
                        >
                        </p-fileUpload>
                      </div>
                    </div>
                    <!--Default Display.-->
                    <p-fileUpload
                      *ngIf="ulpoadedFiles.length == 0"
                      name="images"
                      customUpload="true"
                      [auto]="true"
                      [showUploadButton]="false"
                      (uploadHandler)="onNgoLogoUpload($event)"
                      chooseLabel="Drag a File here or browse for a file to upload"
                      accept=".jpeg, .jpg, .png, .gif"
                      allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                      maxFileSize="2000000"
                      required
                    >
                    </p-fileUpload> 
                  </div>
                </div>
                <div class="text-right">
                  <button
                    class="arrow-submit"
                    type="submit"
                    [disabled]="steponeForm.invalid || ngoLogoUrlName == null"
                  ></button>
                </div>
              </form>
            </div>
            <span class="requiredFeilds"
              ><sup>*</sup> Indicated required fields</span
            >
          </div>
        </div>
        <img
          src="/assets/images/ngo/step-1bg.png"
          alt=""
          class="img-fluid d-lg-none mt-4"
        />
      </div>
      <div class="col-lg-6 text-right step-2-img">
        <img src="/assets/images/ngo/step-1bg.png" alt="" class="img-fluid" />
      </div>
    </div>
    <div></div>
  </div>
  <!-- Loader -->
  <app-signup-loader [isLoaded]="isLoading"></app-signup-loader>
</section>

<!-- logo Crop Dialogue Box -->
<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{ display: display }">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{ ngoLogoUrlName }}</h4>
      </div>
      <div class="modal-body">
        <image-cropper
          [imageChangedEvent]="imageChangedEvent"
          [maintainAspectRatio]="true"
          [aspectRatio]="4 / 4"
          [resizeToWidth]="250"
          format="png"
          (imageCropped)="imageCropped($event)"
          (imageLoaded)="imageLoaded()"
          (cropperReady)="cropperReady()"
          (loadImageFailed)="loadImageFailed()"
          style="max-height: 500px"
        >
        </image-cropper>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-default btn-box-shadow"
          (click)="SaveCropedImage()"
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>